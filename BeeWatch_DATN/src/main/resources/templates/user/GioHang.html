<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/index.html}"
>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Giỏ hàng</title>

    <!-- <link href="/GioHang/cartdemo.css" rel="stylesheet"> -->
    <link
      href="/assets/user/GioHangCSS/cartdemo.css"
      rel="stylesheet"
      media="all"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!--Link mới-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>

    <!-- Layout -->
    <link
      href="/assets/user/bootstrap.css"
      rel="stylesheet"
      type="text/css"
      media="all"
    />
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/assets/user/jquery.min.js"></script>
    <!-- Custom Theme files -->
    <!--theme-style-->
    <link
      href="/assets/user/style.css"
      rel="stylesheet"
      type="text/css"
      media="all"
    />
    <!--//theme-style-->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="keywords"
      content="New Store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
   Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design"
    />
    <script type="application/x-javascript">
      addEventListener("load", function() {
        setTimeout(hideURLbar, 0);
      }, false);

      function hideURLbar() {
        window.scrollTo(0, 1);
      }
    </script>
    <!--fonts-->
    <link
      href="http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900"
      rel="stylesheet"
      type="text/css"
    />
    <!--//fonts-->
    <!-- start menu -->
    <link
      href="/assets/user/memenu.css"
      rel="stylesheet"
      type="text/css"
      media="all"
    />
    <script type="text/javascript" src="/assets/user/memenu.js"></script>
    <script>
      $(document).ready(function () {
        $(".memenu").memenu();
      });
    </script>
    <!-- css phần chạy ảnh -->
    <style type="text/css">
      #imageProduct {
        margin-left: 10px;
        height: 260px;
        width: 260px;
      }
    </style>
    <!-- Phần chuyển trang -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css"
      integrity="sha512-17EgCFERpgZKcm0j0fEq1YCJuyAWdz9KUtv1EjVuaOz8pDnh/0nZxmU6BBXwaaxqoi9PQXnRWqlcDB027hgv9A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"
      integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body>
    <div class="mt-5 container" layout:fragment="content">
      <div class="nav-bre" style="margin-top: 20px">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item"><a href="#">Giỏ hàng</a></li>
          </ol>
        </nav>
      </div>
      <form name="cartForm">
        <div class="row container">
          <aside class="col-lg-12">
            <div class="card">
              <div class="table-responsive">
                <table class="table table-borderless table-shopping-cart">
                  <thead class="thead-dark text-muted">
                    <tr class="small text-uppercase">
                      <th scope="col">Ảnh</th>
                      <th scope="col">Tên sản phẩm</th>
                      <th scope="col" width="220">Số lượng</th>
                      <th scope="col" width="220">Giá</th>
                      <th scope="col" class="text-right d-none d-md-block">
                        Hành động
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="item in cart.items">
                      <td>
                        <a href="/beestore/product/detail/{{item.productId}}">
                          <img
                            src="/assets/images/{{item.image}}"
                            width="150"
                            height="150"
                          />
                        </a>
                      </td>
                      <td>
                        <div style="margin-top: 50px">
                          <a href="/beestore/product/detail/{{item.productId}}"
                            >{{item.name}}</a
                          >
                        </div>
                      </td>

                      <td>
                        <div style="margin-top: 45px; border: hidden">
                          <input
                            ng-change="cart.checkQuantity($index)"
                            ng-model="item.qty"
                            type="number"
                            min="1"
                            required
                            id="qty"
                            ng-pattern="^[0-9]*[1-9][0-9]*$"
                            onkeyup="value=value.replace(/[^0123456789\\.]/g,'');"
                          />
                        </div>
                      </td>
                      <td>
                        <div class="price-wrap" style="margin-top: 50px">
                          <a class="price"
                            >{{item.price * item.qty|number:0}} VNĐ</a
                          >
                        </div>
                      </td>
                      <td class="text-right d-none d-md-block">
                        <button
                          ng-click="cart.remove($index)"
                          class="btn btn-ssm btn-danger"
                          style="margin-top: 45px"
                        >
                          <i class="fa fa-trash"></i>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div
              class="total d-flex justify-content-end mt-3 text-danger"
              style="font-size: 20px; font-weight: 500"
            >
              Tổng số tiền: {{cart.amount | number:0}} VNĐ
            </div>
            <br />
            <a class="btn btn-warning" th:href="@{/beestore/product}"
              >Tiếp tục mua hàng</a
            >
            <button
              th:if="${isAccount == 0}"
              ng-click="orderVisting.purchase()"
              ng-disabled="cart.amount ==0"
              class="btn btn-success"
              id="btn2"
            >
              Thanh Toán
            </button>

            <div th:if="${isAccount == 1}">
              <button
                ng-click="orders.purchase()"
                ng-disabled="cart.amount ==0"
                class="btn btn-success"
                id="btn1"
              >
                Thanh Toán
              </button>
            </div>

            <!--        <button-->
            <!--                ng-click="cart.reload1()"-->
            <!--                ng-disabled="cartForm.$invalid || cart.amount ==0"-->
            <!--                class="btn btn-primary offset-8"-->
            <!--        >-->
            <!--          Cập Nhật-->
            <!--        </button>-->
          </aside>
        </div>
      </form>

      <br />
      <h2 class="text-center">Bạn có thể yêu thích</h2>
      <div class="row filtering" style="margin-top: 20px">
        <div class="col-md-3" th:each="p:${top10}">
          <div class="card-img-actions">
            <img
              th:src="@{|/assets/images/${p.image}|}"
              class="card-img img-fluid"
              id="imageProduct"
              alt=""
            />
          </div>

          <div class="card-body bg-light text-center">
            <div class="mb-2">
              <h4 class="font-weight-semibold mb-2">
                <a href="#" class="text-default mb-2" data-abc="true"
                  >[[${p.name}]]</a
                >
              </h4>
            </div>
            <h4 class="mb-0 font-weight-semibold">
              <div
                class="text-center"
                style="font-style: italic; color: red"
                th:if="${p.category.discount!= null}"
              >
                <b
                  >[[*{#numbers.formatInteger(p.price - (p.price *
                  (p.category.discount.percentDiscount)/100),3,'POINT')}]] đ</b
                >
              </div>
              <div
                class="text-center"
                style="font-style: italic; color: red"
                th:if="${p.category.discount == null}"
              >
                <b>[[*{#numbers.formatInteger(p.price ,3,'POINT')}]] đ</b>
              </div>
            </h4>
            <br />
            <a class="btn btn-warning" th:href="@{|detail/${p.productId}|}">
              <i class="fa fa-cart-plus mr-2"></i>Mua hàng
            </a>
          </div>
          <div th:if="${isAccount == 1}">
            <input
              type="text"
              th:value="${account.accountId}"
              id="account"
              name="account"
            />
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.js"
      integrity="sha512-eP8DK17a+MOcKHXC5Yrqzd8WI5WKh6F1TIk5QZ/8Lbv+8ssblcz7oGC8ZmQ/ZSAPa7ZmsCU4e/hcovqR8jfJqA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script type="text/javascript">
      $(".filtering").slick({
        dots: true,
        infinite: true,
        speed: 300,
        slidesToShow: 4,
        slidesToScroll: 2,
        responsive: [
          {
            breakpoint: 1024,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3,
              infinite: true,
              dots: true,
            },
          },
          {
            breakpoint: 600,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2,
              arrows: false,
            },
          },
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1,
              arrows: false,
            },
          },
        ],
      });
    </script>
  </body>
</html>
