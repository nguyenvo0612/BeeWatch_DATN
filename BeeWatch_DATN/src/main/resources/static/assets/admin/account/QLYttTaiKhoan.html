<!DOCTYPE html>
<html lang="en">

<head>
<title>Quản Lý Thông Tin Tài Khoản</title>
<!-- Required meta tags -->
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />

<!-- Bootstrap CSS -->
 <!-- <link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
	integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	crossorigin="anonymous" /> -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /> 
<style type="text/css">
body {
	width: auto;
}

.list {
	max-height: 100px;
	max-width: 100px;
	overflow: scroll;
}
</style>

</head>

<body>
	<div class="container">
	<div class="col-sm-3">
				<h3 class="page-title" style="width: 350px">QUẢN LÝ NHÂN VIÊN </h3>
		</div>
		<!-- <nav class="row">
      <nav class="navbar navbar-expand-sm navbar-light bg-light col">
        <a class="navbar-brand" href="#">Admintration</a>
        <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
          aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavId">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
              <a class="nav-link" href="#"><i class="fa fa-home" aria-hidden="true"></i> Home <span
                  class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#"><i class="fa fa-info" aria-hidden="true"></i> Videos</a>
            </li>
            <nav class="item">
              <a href="" class="nav-link"><i class="fa fa-id-card" aria-hidden="true"></i> Users</a>
            </nav>
            <nav class="item">
              <a href="" class="nav-link"><i class="fa fa-comment" aria-hidden="true"></i> Reports</a>
            </nav>
            </form>
        </div>
      </nav>
    </nav> -->
		<div class="row">
			<div class="col ">
				<ul class="nav nav-tabs" id="myTab" role="tablist">
					<li class="nav-item" role="presentation"><a
						class="nav-link active" id="danhsach-tab" data-toggle="tab"
						data-target="#danhsach" href="" role="tab"
						aria-controls="danhsach" aria-selected="false">Danh Sách</a></li>
					<li class="nav-item" role="presentation"><a class="nav-link "
						id="chinhsua-tab" data-toggle="tab" data-target="#chinhsua"
						href="" role="tab" aria-controls="chinhsua" aria-selected="true" ng-click="reset1()">Thêm mới/Chỉnh sửa</a></li>
					<li class="nav-item" role="presentation"><a class="nav-link"
						id="phanquyen-tab" data-toggle="tab" data-target="#phanquyen"
						href="" role="tab" aria-controls="phanquyen" aria-selected="false">Phân
							Quyền</a></li>
				</ul>

				<!-- Chinh Sửa -->
				<div class="tab-content" id="myTabContent">
					<div class="tab-pane fade " id="chinhsua" role="tabpanel"
						aria-labelledby="chinhsua-tab">

						<div class="card">

							<div class="card-body">
								<div class="row">
									<div class="col">
										<div class="col-sm-4 text-center">
											<label for="image"> <img alt=""
												src="/assets/images/{{form.image}}" class="img-rounded"
												width="304" height="236">
											</label> <input type="file" class="form-control-file" id="image"
												onchange="angular.element(this).scope().imageChanged(this.files)">
										</div>
									</div>
									<div class="col">
										<div class="form-group">
											<label for="username">Tài Khoản</label> <input type="text"
												class="form-control" placeholder="Username" id="username"
												ng-model="form.username" ng-change="removeAccents(this);" onblur="remoteKiTuDB('username')" ng-disabled="form.accountId != null"/>
										</div>
										<div class="form-group">
											<label for="fullname">Họ Tên</label> <input type="text"
												class="form-control" placeholder="Fullname" id="fullname" onblur="remoteKiTuDB('fullname')"
												ng-model="form.fullname" minlength=6 />
										</div>
										<div class="form-group">
											<label for="sdt">SĐT</label> <input type="text" 
												class="form-control" placeholder="SĐT" id="sdt" maxlength="12"
												ng-model="form.phone" onkeyup="value=value.replace(/[^0123456789\\.]/g,'');"/>
										</div>
										<div class="form-group">		
											<label for="bithdate">Ngày Sinh</label> <input type="date" 
												class="form-control" placeholder="Ngày sinh" id="bithdate" onblur="checkDateHtai('bithdate')"
												ng-model="form.birthdate" />
										</div>
									</div>
									<div class="col">
										<div class="form-group">
											<label for="password">Mật Khẩu</label> <input type="password"
												class="form-control" placeholder="Password" id="password" onblur="remoteKiTuDB('password')"
												ng-model="form.password" />
										</div>

										<div class="form-group">
											<label for="email">Email</label> <input type="email"
												class="form-control" placeholder="Email" id="email" onblur="remoteKiTuDB('email')"
												ng-model="form.email" />
										</div>
										<div class="form-group">
											<label for="adress">Địa Chỉ</label> <input type="text"
												class="form-control" placeholder="Địa chỉ" id="adress" onblur="remoteKiTuDB('adress')"
												ng-model="form.address" />
										</div>
										<!-- Chưa check trống ------------------------------ -->
										<div class="form-group">
											<label>Trạng Thái</label>

											<div class="form-control">
												<label class="radio-inline"> <input type="radio"
													name="available" ng-model="form.status" ng-value="true"
													checked> Sử Dụng
												</label> &emsp; <label class="radio-inline"> <input
													type="radio" name="available" ng-model="form.status"
													ng-value="false"> Ngưng Sử Dụng
												</label>
											</div>

										</div>
									</div>
								</div>
							</div>
							<div class="mb-3 text-muted text-center">
								<!-- create() -->
								<button class="btn btn-primary" ng-click="validate()" ng-if="checkadmin != false" ng-disabled="form.accountId != null">
									<i class="fa fa-plus" aria-hidden="true" ></i> Thêm
								</button>
								<button class="btn btn-warning" ng-click="update()">
									<i class="fa fa-wrench" aria-hidden="true"></i> Cập Nhật
								</button>
								<button class="btn btn-info" ng-click="reset()" ng-if="checkadmin != false">
									<i class="fa fa-refresh" aria-hidden="true" ></i> Xóa Form
								</button>
							</div>
						</div>

					</div>
					<!-- Danh Sach -->
					<div class="tab-pane  card active" id="danhsach" role="tabpanel"
						aria-labelledby="danhsach-tab">
						<div class="table-responsive">
							<br>
							<div class="mt-3 d-flex flex-row-reverse">
								<div class="p-2 input-group input-group-sm col-sm-3 ">
									<input type="text" class="form-control" placeholder="Search"
										id="keyword" ng-model="search.name ">
									<div class="input-group-prepend">
										<button class="input-group-text" type="submit"
											ng-click="timKiem()">Tìm Kiếm</button>
									</div>
								</div>
								<div class="p-2 col-sm-2">
									<select id="trangThai" ng-model="status"
										ng-change="genderStart()" class="form-control form-control-sm">
										<option value="">-- Tất cả --</option>
										<option value="true">Sử Dụng</option>
										<option value="false">Ngưng Sử Dụng</option>
									</select>
								</div>
							</div>
							<table class="table table-bordered">
								<tr>
									<td><b>ID</b></td>
									<td><b>Tên Đăng Nhập</b></td>
									<td><b>Họ Tên</b></td>
									<td><b>Email</b></td>
									<td><b>Ảnh</b></td>
									<td><b>SĐT</b></td>
									<td><b>Địa Chỉ</b></td>
									<td><b>Ngày Sinh</b></td>
									<th>Trạng Thái</th>
									<th>Hành Động</th>
									<td>&nbsp;</td>
								</tr>
								<tr ng-repeat="item in pager.items">
									<td>{{item.accountId}}</td>
									<td>{{item.username}}</td>
									<td>{{item.fullname}}</td>
									<td>{{item.email}}</td>
									<td><img src="/assets/images/{{item.image}}"
										style="width: 50px; height: 45px" alt=""></td>
									<td>{{item.phone}}</td>
									<td>{{item.address}}</td>
									<td>{{item.birthdate | date : 'dd-MM-yyyy'}}</td>
									<td>{{item.status? 'Sử Dụng':'Ngưng Sử Dụng'}}</td>
									<td><div class="btn-group">
											<button ng-click="edit(item)"
												class="btn btn-primary fa fa-wrench"></button>
											<button ng-click="delete(item)"
												class="btn btn-danger fa fa-trash" ng-if="checkadmin != false"></button>
										</div></td>
								</tr>
							</table>

						</div>
						<div class="mb-3 panel-footer text-center">
							<button class="btn btn-danger" ng-click="pager.first()">
								<b class="fa fa-hand-o-up "></b>
							</button>
							<button class="btn btn-primary" ng-click="pager.prev()">
								<b class="fa fa-hand-o-left"></b>
							</button>

							<button class="btn btn-success">{{pager.page + 1}} of
								{{pager.count}}</button>

							<button class="btn btn-primary" ng-click="pager.next()">
								<b class="fa fa-hand-o-right"></b>
							</button>
							<button class="btn btn-danger" ng-click="pager.last()">
								<b class="fa fa-hand-o-down"></b>
							</button>
						</div>
					</div>

					<!-- phan quyen -->
					<div class="tab-pane fade card" id="phanquyen" role="tabpanel"
						aria-labelledby="phanquyen-tab">
						<table class="table table-bordered">
							<tr>
								<td><b>Tên Đăng Nhập</b></td>
								<td><b>Họ Tên</b></td>
								<th ng-repeat="role in roles" class="text-center">
								<p ng-if="role.name == 'ROLE_USER'">Nhân Viên</p>
								<p ng-if="role.name == 'ROLE_CUSTOMER'">Khách Hàng</p>
								<p ng-if="role.name == 'ROLE_ADMIN'">Admin</p>
								</th>
							</tr>

							<tr ng-repeat="acc in admins">
								<td>{{acc.username}}</td>
								<td>{{acc.fullname}}</td>
								<th ng-repeat="role in roles" class="text-center"><input
									ng-checked="authority_of(acc,role)"
									ng-click="authority_changed(acc,role)" type="checkbox" ng-disabled="acc.username == 'admin'">
								</th>
							</tr>
						</table>
						<!-- <div class="mb-3 panel-footer text-center">
							<button class="btn btn-danger" ng-click="pager.first()">
								<b class="fa fa-hand-o-up "></b>
							</button>
							<button class="btn btn-primary" ng-click="pager.prev()">
								<b class="fa fa-hand-o-left"></b>
							</button>

							<button class="btn btn-success">{{pager.page + 1}} of
								{{pager.count}}</button>

							<button class="btn btn-primary" ng-click="pager.next()">
								<b class="fa fa-hand-o-right"></b>
							</button>
							<button class="btn btn-danger" ng-click="pager.last()">
								<b class="fa fa-hand-o-down"></b>
							</button>
						</div> -->
					</div>
				</div>
				<footer class="row"></footer>
			</div>

</body>

</html>